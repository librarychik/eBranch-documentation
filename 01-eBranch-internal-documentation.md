# **eBranch Documentation**

Contents

[Mission Statement:](#mission-statement) **4**

[What does the eBranch do?](#what-does-the-ebranch-do) **4**

[eBranch Knowledge Base & Tools](#ebranch-knowledge-base-tools) **4**

[eBranch Team Approach](#ebranch-team-approach) **5**

[Emergency Communication
Responsibilities](#emergency-communication-responsibilities) **5**

[Strategies and approaches](#strategies-and-approaches) **6**

> [Handy tips and things to
> remember](#handy-tips-and-things-to-remember) 6
>
> [Updating staff profiles/names](#updating-staff-profilesnames) 6

[Routine eBranch tasks](#routine-ebranch-tasks) **7**

> [MultiSearch / Library Search Admin
> Tool](#multisearch-library-search-admin-tool) 10
>
> [Reserves in Multisearch](#reserves-in-multisearch) 10

[Web authors](#web-authors) **13**

> [Training](#training) 13
>
> [Authoring and editing](#authoring-and-editing) 13
>
> [Best practices](#best-practices) 15
>
> [Types of Web Authors + how we support
> them](#types-of-web-authors-how-we-support-them) 15

[eBranch superpowers and how to wield them
wisely](#ebranch-superpowers-and-how-to-wield-them-wisely) **16**

[Drupal: Adding an Advancement / Donate now / Give to the Library
button](#drupal-adding-an-advancement-donate-now-give-to-the-library-button)
**24**

[Password / authentication on web
pages](#password-authentication-on-web-pages) **24**

> [Other odds and ends](#other-odds-and-ends) 26

[Miscellaneous troubles that come up and how to shoot
them](#miscellaneous-troubles-that-come-up-and-how-to-shoot-them) **26**

> [Vanishing Attachments](#vanishing-attachments) 26
>
> [Problems with Godot pages](#problems-with-godot-pages) 27
>
> [Problems with CUFTS pages](#problems-with-cufts-pages) 27
>
> [Problems with Troy/Millennium
> pages](#problems-with-troymillennium-pages) 27
>
> [Structural changes, like taxonomies and menus, that don't seem to
> "take"](#structural-changes-like-taxonomies-and-menus-that-dont-seem-to-take)
> 27

[Digital sign in front door vestibule at Bennett
Library](#digital-sign-in-front-door-vestibule-at-bennett-library)
**28**

[New books list](#new-books-list) **28**

[Computer availability tool](#computer-availability-tool) **29**

[Website migration 2015 leftover bits and
bobs](#website-migration-2015-leftover-bits-and-bobs) **29**

> [Webform data from old site:](#webform-data-from-old-site) 29

[Drupal 8 instructions (staff site)](#drupal-8-instructions-staff-site)
**29**

> [Location of old and new staff
> sites](#location-of-old-and-new-staff-sites) 29
>
> [Access to the staff site and user account
> creation](#access-to-the-staff-site-and-user-account-creation) 29
>
> [Roles and permissions](#roles-and-permissions) 30
>
> [Nightly updates to keep access
> current](#nightly-updates-to-keep-access-current) 31
>
> [Personal SFU computing IDs that don't appear in the staff site's
> Drupal account
> list](#personal-sfu-computing-ids-that-dont-appear-in-the-staff-sites-drupal-account-list)
> 32
>
> [Role accounts and the white list](#role-accounts-and-the-white-list)
> 33
>
> [Setting up access for a role
> account](#setting-up-access-for-a-role-account) 33
>
> [Possible user confusion between role accounts and web author
> accounts](#possible-user-confusion-between-role-accounts-and-web-author-accounts)
> 33
>
> [Creating a local, non-CAS account (an account where there is no SFU
> Computing
> ID)](#creating-a-local-non-cas-account-an-account-where-there-is-no-sfu-computing-id)
> 33
>
> [Megamenu](#megamenu) 33
>
> [Content types](#content-types) 34
>
> [Webforms](#webforms) 34
>
> [Incident reports](#incident-reports) 34
>
> [Email notifications](#email-notifications) 34
>
> [Search index configuration](#search-index-configuration) 35
>
> [Search boxes on sets of pages](#search-boxes-on-sets-of-pages) 35
>
> [Staff site search statistics in
> Piwik](#staff-site-search-statistics-in-piwik) 35
>
> [Opt for Drupal .html pages over attached files such as .pdf
> documents](#opt-for-drupal-.html-pages-over-attached-files-such-as-.pdf-documents)
> 35

[Drupal 7 instructions (public
site)](#drupal-7-instructions-public-site) **36**

> [Site location](#site-location) 36
>
> [Menus](#menus) 36
>
> [Menu editing](#menu-editing) 36
>
> [Taxonomies](#taxonomies) 37
>
> [Contexts](#contexts) 37
>
> [Search boxes](#search-boxes) 38
>
> [Content types](#content-types-1) 38
>
> [Blogs](#blogs) 39
>
> [Blog posts](#blog-posts) 39
>
> [Blog taxonomy](#blog-taxonomy) 40
>
> [Blog roll](#blog-roll) 40
>
> [Setting up a new blog](#setting-up-a-new-blog) 40
>
> [Contact us](#contact-us) 41
>
> [Home pages](#home-pages) 41
>
> [News and events and FAQs](#news-and-events-and-faqs) 41
>
> [Rotating images](#rotating-images) 41
>
> [Forms/ webforms](#forms-webforms) 42
>
> [Attached file fields in forms](#attached-file-fields-in-forms) 42
>
> [Site-wide webform settings](#site-wide-webform-settings) 42
>
> [Image gallery](#image-gallery) 42
>
> [FAQs](#faqs) 43

[Systems wiki](#systems-wiki) **43**

**[Personnel and staffing info](#personnel-and-staffing-info) 43**

> [Vacation scheduling](#vacation-scheduling) 43

Mission Statement:
==================

A.  We believe Library resources should be as **easy to use** as
    > possible. We value plain language, simple and intuitive layouts,
    > and **accessible** tools and resources in every sense of the word.

B.  Our focus is **end users**: students, faculty, staff, SFU
    > administrators, and the general public. In practice this includes
    > **supporting web authors** as well.

C.  The eBranch is **an important link between public services and
    > technical processes**. Some of the partners we work with most
    > closely:

    -   Public services: Liaison librarians, SLC, RC, L & I, Loans,
        > Belzberg and Fraser locations.

    -   Management office, including Graphics.

    -   Technical services: Systems, and Collections***.***

What does the eBranch do?
=========================

The eBranch has overall responsibility for user experience for the
Library's online presence:

-   Library Search

-   Hours tool

-   Blogs (Feedback and Staff blogs, plus blogs by individual
    > librarians)

-   Workshops

-   Other miscellaneous pages, such as: Librarian and other Library
    > Position Openings
    > ([[http://www.lib.sfu.ca/about/positions]{.underline}](http://www.lib.sfu.ca/about/positions))

The eBranch provides training and support to the Library's authors:

-   Evaluating and recommending improvements (at a high-level and to
    > individual pages) to increase usability and function, and
    > implementing the recommended changes.

-   Assisting web authors to create and maintain webpages, online
    > resources, and posts to the Library webpages and social media.

-   Writing, editing, formatting, and posting items to the Library's
    > website.

-   Creating and supporting web forms.

The eBranch is the link between public services and Library Systems:

-   Communicating internally to systems if the public cannot access our
    > services

-   Communicating externally thru News and Events and Notices on the
    > Home Page

eBranch Knowledge Base & Tools
==============================

-   Software (e.g. Drupal)

-   Usability and standards

-   Writing for the web

-   Online accessibility

-   Web Authors Guidelines:
    > [[http://staff.lib.sfu.ca/divisions/ebranch/publishing/writing]{.underline}](http://staff.lib.sfu.ca/divisions/ebranch/publishing/writing)

-   Using Drupal:
    > [[http://staff.lib.sfu.ca/divisions/ebranch/publishing/drupal]{.underline}](http://staff.lib.sfu.ca/divisions/ebranch/publishing/drupal)

-   eBranch Tools:
    > [[http://staff.lib.sfu.ca/divisions/ebranch/tools]{.underline}](http://staff.lib.sfu.ca/divisions/ebranch/tools)

    -   must be logged in as an admin to access the content (note that
        > you will need the public or staff admin login depending on the
        > location)

-   x: KeePass for passwords and also URLs for web admin functions

eBranch Team Approach
=====================

-   Our team includes web developers, librarians, UX professionals and a
    > manager.

-   Information sharing:

    -   Informal and frequent (as-needed) communication

    -   staff web pages

    -   Google Docs (be sure to share your Google ID)

    -   X drive

    -   P Keep: eBranch (less so)

    -   Calendars: eBranch team members share calendars and keep them up
        > to date

-   Working from home (or off-site): Let manager know and mark in
    > calendar

Emergency Communication Responsibilities
========================================

-   **Communicating in emergency situations--- When disaster strikes or
    > snow procedures**

1.  In the event of an emergency an ADL or the UL will update the public
    > site's home page with an emergency message using the Emergency
    > page content type.

2.  **The eBranch is responsible for the** **hours tool reflecting our
    > hours during an emergency or snow closure. **

3.  **Wait to hear from the UL or an ADL before making changes to the
    > hours tool** or, if you think it a good idea, adding in an
    > emergency message. Don't make changes based on what SFU University
    > Communications states as their messaging can be ambiguous and we
    > don't wish to erroneously declare a library closed or its hours
    > truncated.

4.  Whoever sees a communication about changed campus hours first should
    > make the appropriate changes to the hours tool and let all of us
    > eBranch staff know that you're doing it so only one person is
    > updating hours at one time.

-   **Responding to crises---e.g. a bug happens**. We are here to test,
    > test report, and communicate both ways

1.  Try to replicate the problem

2.  Acknowledge the issue -- let the person know you are going to work
    > on it. Ask them to step away so that we can work on it (i.e. they
    > must stop editing the problem page)

3.  Once you have a decent test or understand the problem, report it,
    > usually to Todd (or Kurt if it's a server issue). When in doubt,
    > try lib-sys. It is better to report than not to report.

4.  Status updates to the person who initially reported the problem.

5.  Repeat as necessary.

-   **Communicating in emergency situations---e.g. server down**

1.  Wait a couple of minutes. Often the issue is temporary and will fix
    > itself.

2.  E-mail lib-sys to let them know about the problem. Mark as URGENT.

-   **Communicating in (semi) emergency situations---Library Search,
    > Catalogue not working**

1.  Create a News & Events item describing the problem, e.g. Library
    > Search is experiencing difficulties.... \[temporary solution\]...
    > We are working on the problem." Then select "High Priority" so
    > that an Attention/warning icon will appear, and the item will stay
    > at the top of the display. (Sample wording: Library Search
    > experiencing problems: We are currently having problems with some
    > functionality in Library Search. We are working to resolve the
    > issue. If you receive an error message (such as Application Error)
    > when searching for books, journal articles, or media, you can
    > still use the [[Library
    > Catalogue]{.underline}](https://sfu-primo.hosted.exlibrisgroup.com/primo-explore/search?vid=SFUL&sortby=rank)
    > to find your resources.

2.  If a Multisearch/Library Search problem, go to the Multisearch Admin
    > Tool (http://search.lib.sfu.ca:8001/)) and select Notices; either
    > edit an existing notice or add a new one to have it appear
    > (prominently!) on the Library Search results pages.

Strategies and approaches
=========================

-   Monitor communications to and from the Library via social media, Txt
    > Us, the feedback blog for awareness of user issues and questions

-   Keep an eye on how users are searching and using our site (e.g.
    > [[http://search.lib.sfu.ca/admin]{.underline}](http://search.lib.sfu.ca/admin))

-   Monitor all the Library's web publishing, making basic corrections
    > and consulting with web authors as needed.

-   Assist web authors to create and make better webpages and online
    > resources

    -   Provide excellent and quick service (goal of 1-2 day turnaround
        > for simple requests).

    -   Be encouraging! Reward baby steps. Give gold stars.

    -   Listen and try to accommodate --keep in mind the importance of
        > scalability and sustainability.

Handy tips and things to remember
---------------------------------

-   Remember to pay attention to whether you need to be/work on the
    > PUBLIC or STAFF site.

-   Remember things will look different to you as an admin and as a
    > "regular" web author.

    -   One practical tip: use Browser A (e.g. Chrome) for your admin
        > access, and Browser B (eg Firefox) for your personal login
        > access.

    -   Remember as an administrator to login via the "back door" urls
        > listed in KeePass (not through CAS)

-   Watch for rabbit holes and dangerous pathways! Common mistakes and
    > holes to fall into:

    -   Fixing old pages

    -   Promising customisation that won't be sustainable, or will have
        > large-scale future implications (always proceed with great
        > caution when discussing customisation -- and consult! consult!
        > consult!)

Updating staff profiles/names
-----------------------------

> [For web authors only:]{.underline}

-   their **Drupal profile/account on the public site**

> -they are encouraged to make the changes themselves.  Sometimes we do
> it if we\'re impatient.  Only the web author who \"owns\" the account
> plus us can change this info.

-   their **Drupal profile/account on the staff site**

> -they are encouraged to make the changes themselves.  Only the web
> author who \"owns\" the account plus us can change this info.

-   **taxonomy lists** such as the pick list/drop down list of liaison
    > librarians that they see when they create their monthly reports on
    > the staff site. Currently, most taxonomy lists on the public site,
    > with the exception of taxonomy lists for workshops, can be amended
    > only by us.  On the staff site, currently only we can change
    > taxonomy lists.

> [For any staff member, including web authors:]{.underline}

-   their **staff directory entry**

> \- any web author can change this info and web authors are encouraged
> to do this themselves but Susie and/or Dipa have responsibility and
> should keep the staff directory current.  If they are not wanting to
> do this, please let Nina know and she will talk with them and Cecilia.
>
> \- TIP: For staff who use variants of their names (e.g. Ali for
> Alison), try to include both names, to ensure the person is findable.
> Example: [[Ali (Alison)
> Moore]{.underline}](https://staff.lib.sfu.ca/tools-support/tools/staff-directory/ali-alison-moore).

-   **text within the body of miscellaneous web pages**

> \- For example, they might have a departmental web page on the public
> site with a list of staff in that department. We don\'t make these
> changes.  Either the web author or some other web author in their
> division can make these changes.

Routine eBranch tasks
=====================

**Daily Tasks (see also Monthly and As Needed):**

A.  Respond to incoming emails. Library staff are encouraged to use the
    > [[library-ebranch\@sfu.ca]{.underline}](mailto:library-ebranch@sfu.ca)
    > email list rather than our personal email addresses.

-   We take turns responding to incoming requests with one person in
    > charge of responses for a whole day e.g. Janis responds on
    > Mondays, Wednesdays, and Fridays.

-   For new issues, the day's designated response person should respond
    > even if the requestor sends the email to an eBranch staff member's
    > personal email and copies library-ebranch\@sfu.ca and/or if they
    > greet a specific staff member by name in the email.

-   For ongoing issues, the eBranch staff member who first responded to
    > the request should continue responding to the issue no matter
    > which day follow up requests are sent on.

-   If an eBranch staff member would like to deal with an incoming issue
    > and it's not their response day, they should alert other staff
    > members.

-   If an eBranch responder would rather not deal with an incoming
    > request or feel they don't have the expertise to deal with the
    > request, they should alert eBranch staff and ask other staff to
    > respond to the issue.

-   For recurring issues or requests (e.g. work on the annual Freedom to
    > Read Week activities), eBranch staff members should check in with
    > one another to determine who will respond.

-   If in doubt, check with eBranch colleagues. In most cases requests
    > are not so urgent that you need to go ahead without consulting.

B.  Look at new content on both Staff and Public pages. (30 minutes to
    > an hour/day), but use your judgement. Sometimes you can make big
    > improvements as you come across issues.

    -   fix **small errors and make minor improvements** and
        > clarifications, e.g.:

        -   easy fixes like dead links

        -   add alt text for images

        -   resize images (most should now be 600 x 350) -- and make
            > sure they are responsive by removing the numbers

        -   note duplicate content and attempt to address (for larger
            > issues, note the trend and consult with Nina)

        -   fix capitalisation in body title → sentence case

        -   keep upcoming style guide in mind, including our usual
            > in-house practices

            -   such as "Belzberg Library (SFU Vancouver)" instead of
                > "Belzberg."

        -   on the public site, insert new tables of contents (replacing
            > old ones)

        -   if there's time, clean up formatting (fix heading sizes,
            > spacing, take out horizontal rules/lines, etc.)

        -   check and correct spelling and grammatical errors and typos

        -   check the URL. Particularly watch for:

            -   [[www.lib.sfu.ca/\[here]{.underline}](http://www.lib.sfu.ca/%5bhere)\]
                > ← avoid root level as it messes up the architecture

                -   Also avoid creating just below the main headings of
                    > Find/Help/Borrow/Facilities/About

            -   "-0" or "-\#" which indicates clone or copy --\> figure
                > out what needs to happen to the original

            -   If early enough and not a great url, see if you can
                > assign one that is more searchable

        -   **CAVEAT**: Be especially cautious making corrections and
            > updates to course guides. Liaison librarians use these for
            > instruction, and we have sometimes made changes that led
            > to confusion or disorientation.

            -   **For course guides, check with the web author before
                > making changes that are likely to be noticed (such as
                > reformatting updates)**.

                -   Consider creating a clone of the page if the changes
                    > are quite significant, and waiting for the web
                    > author's okay before publishing.

    -   Watch for **trends** and larger issues, and consult with Nina

C.  Responding to requests to **post documents** to our site that need
    > converting from PDF or Word to Drupal/html.

    -   If a larger project, can share.

D.  Watch for and respond to questions, problem reports and training
    > **requests**, including:

    -   Requests for web author user accounts

    -   Requests for help with web authoring/publishing

    -   Comments/questions/suggestions from the public via the Feedback
        > form

E.  Check Library home pages for **images**:

    -   Ensure the main site, SLC, RC, Belzberg, Fraser, Copyright have
        > enough large images (2-6 per site).

        -   Keep Belzberg and Fraser images "fresh" by updating,
            > unpublishing from time to time

        -   Belzberg requests: "SFU Vancouver is all about community
            > engagement, graduate students and student support
            > generally (as well as research of course). So, for
            > example, the rotating image for the Community Scholar
            > program would be a good 'fit' for the Belzberg homepage."

    -   Make sure each has at least one News & Event item.

    -   When reviewing new or edited pages, check for the following:

        -   Context - does it exist? Has one been used? Is it the right
            > context?

        -   Page-specific URL

        -   Caps in title

        -   Two titles?

        -   Word or textual labels for links instead of URLs

        -   No direct links to fee-based resources

        -   Has Word been used \-- problems with underlying formatting?

        -   Add in alt text for images

        -   Use Drupal owner widget

**A couple of times a week:**

F.  See what's being searched on the Library's site
    > ([[http://search.lib.sfu.ca:8001/dashboard]{.underline}](http://search.lib.sfu.ca:8001/dashboard)
    > )

    -   Consider creating **Best Bets**, adding keywords to FAQs, or
        > making other improvements as appropriate (Note that we have
        > around 120 Best Bets to maintain at present. *Proceed with
        > caution.*)

    -   What else...

**Weekly:**

G.  Reports:

    -   Send **Individual Reports** or highlights to Nina on Thursdays,
        > so that this information can be included in her weekly
        > (Friday) report to Mark Jordan and others.

    -   Forwarding the **Social Media Report** -- Janis will do; Nina
        > will cover in her absence.

**Monthly:**

H.  Statistics: Gathering and inputting **monthly stats**

    -   Start by inputting numbers into Web Site Stats **Scratch Pad**
        > spreadsheet in x:keep:stats -- later move to "real"
        > spreadsheet.

    -   **For Multisearch stats, check the Multisearch Admin Tool** (
        > [[http://search.lib.sfu.ca:8001/]{.underline}](http://search.lib.sfu.ca:8001/))
        > (Formerly: Ask Todd for the Multisearch stats (Nina asks every
        > three months or so))

    -   We report out on monthly, fiscal year, and average month and
        > total

    -   Go to **Google Analytics**
        > ([[https://www.google.ca/analytics]{.underline}](https://www.google.ca/analytics))
        > and sign in

        -   We check two domains, lib.sfu.ca and sfu.ca. (They are both
            > on the spreadsheet but not obvious.)

        -   Choose the raw, unfiltered option

            -   Choose your time period (top right) and get the stats!

            -   Most important: page views, users, sessions

            -   (record the stats using the lib.sfu.ca numbers; sfu.ca
                > warns that filters result in inaccurate counts, and
                > this is always lower)

    -   For services such as the Assignment Calculator and Reserves, see
        > Piwik. url:
        > [[https://piwik.lib.sfu.ca/piwik]{.underline}](https://piwik.lib.sfu.ca/piwik)

**Annually (or thereabouts) or as needed:**

I.  Checking form submissions for problematic IP addresses

    -   From time to time, and especially if you notice spammy
        > submissions coming in via Ask a Librarian
        > ([[https://www.lib.sfu.ca/help/ask-librarian]{.underline}](https://www.lib.sfu.ca/help/ask-librarian))
        > or other webforms:

        -   download the form submissions and sort by IP address

        -   if you notice that spammy submissions are coming from an IP
            > address that isn\'t one normally associated with SFU
            > ([[https://staff.lib.sfu.ca/divisions-units/divisions-units/systems/systems-librarian/ip-ranges]{.underline}](https://staff.lib.sfu.ca/divisions-units/divisions-units/systems/systems-librarian/ip-ranges))

            -   (see also
                > [[https://www.iplocation.net/]{.underline}](https://www.iplocation.net/)
                > to find out where (geographically) IPs are located)

        -   consult with eBranch colleagues and consider blocking the IP
            > addresses.

            -   This is risky as we can accidentally block a genuine
                > user (non-spammer).

            -   We should also unblock from time to time.

MultiSearch / Library Search Admin Tool
---------------------------------------

The MultiSearch Admin Tool
([[http://search.lib.sfu.ca:8001/]{.underline}](http://search.lib.sfu.ca:8001/)):

-   See searches (of Library Search): search or browse the latest day,
    > week, month, year, or a defined period of time.

-   See a list of Best Bets

-   Post "problem" notices.

-   If a page/node appears or doesn't appear that shouldn't because it's
    > either been deleted or de-indexed or changed somehow, do two
    > things:

    -   Clear multisearch's cache from within multisearch admin under
        > "controls". If that doesn't fix the problem, in Drupal,
        > reindex solr:

        1.  Admin -\> Configuration -\> Apache Solr search

        2.  Click \"Delete the Search & Solr index\" and follow the
            > confirmation

        3.  Click \"Index all queued content\" and follow the
            > confirmation

        4.  Watch the progress bar for five or so minutes

### Reserves in Multisearch

Leganto is the reserves tool. Records that live in Leganto for reserves
also live in Alma. Leganto is the front facing version of Alma for
reserves.

Each day at 9am, Calvin ships reserves records from Alma into a file
which Todd picks up for ingestion into Library Search. In general, there
are three types of records:

1.  books, which have an Alma record and anyone can view the item's
    > record in Primo

2.  articles to which we have access and are not restricted to members
    > of a specific course and anyone can view the record for the
    > article in Primo, and, finally,

3.  items such as scanned chapters with copyright restrictions which are
    > restricted to viewing to students in a specific course and the
    > student must authenticate into the item via Canvas. For restricted
    > items, we show a web page that tells the student to first log into
    > Canvas. Web page is here:
    > [[https://www.lib.sfu.ca/borrow/request-materials/course-reserves-limited-access]{.underline}](https://www.lib.sfu.ca/borrow/request-materials/course-reserves-limited-access)
    > .

    -   PIWIK: start with KeePass for password (and url:
        > [[https://piwik.lib.sfu.ca/piwik]{.underline}](https://piwik.lib.sfu.ca/piwik))

        -   Choose the date range

        -   Go to Visitors: Overview on left-hand side

        -   Use drop-down menu (top of page) for each separate service

        -   Note: Numbers might be quite small here. If no "users/unique
            > visitors", it's okay to reuse sessions/visits number.

    -   Attach the updated spreadsheet (web-site-stats-since-mar-2010)
        > to
        > [[http://staff.lib.sfu.ca/divisions/ebranch/reports]{.underline}](http://staff.lib.sfu.ca/divisions/ebranch/reports)

<!-- -->

J.  Check for out-of-date News & Events items and unpublish or delete
    > (or otherwise take action as needed)

**Every three months or so:**

K.  Check public webforms for attachments, confirm with the owner of the
    > forms that it's okay, then delete the attachments.

    -   The only two forms right now:
        > [[http://www.lib.sfu.ca/help/publish/summit-deposit-form]{.underline}](http://www.lib.sfu.ca/help/publish/summit-deposit-form)
        > and
        > [[http://www.lib.sfu.ca/about/initiatives/authors-event/author-photo]{.underline}](http://www.lib.sfu.ca/about/initiatives/authors-event/author-photo)

    -   See: staff.lib.sfu.ca/divisions/ebranch/drupal-notes-version-7
        > for important information about forms.

**As needed: **

L.  **Before a holiday:** Post stat holiday hours notices as News &
    > Events items -- usually the Friday before. Re-use old items from
    > year to year -- Nina "owns" these in her workspace

M.  **From time to time** (and whenever use stats are needed): **pull
    > stats on page views**:

    -   **Go to Structure, then Views, then Export Nodes.**

    -   Save to P:\\Keep\\ebranch\\Export All Nodes list(s)

    -   Open in Excel: choose Delimited and Comma Delimited for easier
        > viewing and sorting.

    -   Note: pages can be sorted by web author as well as views, date,
        > etc.

N.  Review Crazy Egg: Heatmaps, scrollmaps and other visualization tools
    > for webpage use information

    -   We sometimes set up snapshots for key pages. This can also be a
        > useful tool for web authors who want to know how a page is
        > being used. Feel free to send PDFs, and also download the data
        > to a spreadsheet and share.

    -   As always, warn the author to take this data with a heaping
        > pinch of salt. Numbers should be looked at relatively, that
        > is, for patterns and changes, not as exact figures.

        -   When saving and sharing files, be sure to use descriptive
            > filenames. Best not to mention the product used for
            > collecting stats, but the page title, time period, etc.

Web authors
===========

Training
--------

-   **Note:** Most often, requests for "Drupal training" are really
    > opportunities to talk about creating better and more usable
    > resources.

-   Think about content---it is more important than the technical side.

-   What are the needs and goals? Consider i**mmediate** goals and
    > ultimate, **longer-term** goals.

-   Encourage a user-centred perspective

    -   What do we know about end users? (and how do we know it?)

    -   What are end users trying to do (and how can we make this
        > easier)?

    -   What is the *content* and/or *activity* that is most important
        > to users?

-   Encourage thinking about evergreen, low-maintenance content (and
    > plan)

    -   How to minimise need for updating?

    -   Who will maintain the page, and how often?

    -   Discourage "just in case" pages and content

-   Encourage meta-thinking (in consultation as appropriate)

    -   What is the best way to do this? (Or what are some better ways?)

    -   Examples? Back of the napkin drawings?

    -   Start with the architecture, make a plan or map

-   Offer help and support

    -   Technical help and training

    -   Admin superpowers like adding menus, context images and other
        > advanced Drupal stuff, deleted old/unneeded pages

    -   Facilitate/coordinate with Graphics

-   Offer consultation services

    -   Writing and editing help (e.g. we can review content before it
        > is published)

    -   Help with planning, architecture issues

    -   Collaboration and input on usability and writing for the web

-   To practice:

    -   Wait till they have something to work on

    -   Print out a copy of Web Author guidelines

    -   Emphasize user perspective

    -   Can use example of TERRIBLE course guide (bad web page) and have
        > them edit to improve writing, layout, etc. (Used mainly for
        > LTLs):
        > [[http://staff.lib.sfu.ca/assignment1guide]{.underline}](http://staff.lib.sfu.ca/assignment1guide)

Authoring and editing
---------------------

-   Useful links and resources:

    -   The canon:

        -   [[http://staff.lib.sfu.ca/divisions/web-site/web-writing/author-checklist]{.underline}](http://staff.lib.sfu.ca/divisions/web-site/web-writing/author-checklist)

        -   [[http://staff.lib.sfu.ca/divisions/systems/drupal-web-page-editing]{.underline}](http://staff.lib.sfu.ca/divisions/systems/drupal-web-page-editing)

    -   How do I create a stable link...?
        > [[http://www.lib.sfu.ca/faqs/how-do-i-create-a-stable-link-to-an-online-journal-article-or-electronic-book]{.underline}](http://www.lib.sfu.ca/faqs/how-do-i-create-a-stable-link-to-an-online-journal-article-or-electronic-book)

-   Graphics:

    -   Watch for images that are too small, too large, unclear, or
        > owned by others.

    -   Where possible, use 1) home-grown or locally made images, or 2)
        > Creative Commons or other freely available resources.

        -   The G drive is a rich source of images. (Neal/ the Head of
            > eBranch can arrange for access.)

        -   For more images:

            -   check the Library's Flickr account:
                > [[https://www.flickr.com/photos/139967453\@N05/]{.underline}](https://www.flickr.com/photos/139967453@N05/)

            -   visit SFU\'s Image
                > Gallery [[http://www.sfu.ca/image-library/cat/0/list.html]{.underline}](http://www.sfu.ca/image-library/cat/0/list.html)
                > (remember to log in for download access)

    -   Ask the Graphics person for help as needed.

    -   Be very careful to ensure images can be resized for responsive
        > design.

-   Rotating images:

    -   The images themselves are almost always created and handled by
        > the Graphics person; eBranch people can offer guidance and
        > help with the text part. (Note that requests that come in are
        > often text-heavy and not optimised for images. eBranch can
        > facilitate/mediate between the requesting staff and the
        > Graphics person, as well as offer editorial expertise.)

    -   When creating an image in the eBranch, it is helpful to assign
        > ownership to the Graphics person so that it shows up in their
        > Drupal workspace.

-   Promoting events: Rotating images and news and events pages

    -   Note that we have specific workflows for working with some
        > areas, e.g. for author readings in Special Collections:

    -   Tony P and Tony L part:

        1.  Tony P fills out the Graphics request form to ask Tony L to
            > create a poster, News and Events banner image, and home
            > page Rotating Image \-- DONE 

        2.  Tony L will send the poster and images back to Tony P

        3.  Tony P will vet the poster and send corrections back to Tony
            > L if needed

        4.  Tony P will send the finalised poster, banner image,
            > rotating image file, and author images to Ewa and David

    -   The part within Special Collections:

        1.  Ewa and/or David will create the news and events page
            > (keeping it unpublished)

        2.  Ewa and/or David will check in with Tony P for final edits
            > to the news and events page 

    -   The part with us in Digital Services (former eBranch)

        1.  Ewa and/or David will alert Janis/Nina/Janice to finalized
            > event using the library-ebranch\@sfu.ca email address (and
            > including the rotating image so we can create the rotating
            > image over here) \-- but it\'s also fine to check in with
            > us sooner :) 

        2.  One of us will do our usual quick review and publish the
            > news and events page and rotating image.

> During this same time, Janis (or I, if Janis is away) and Tony L. will
> do their magic and create a rotating image after they receive the
> filled in Graphics Request form.

-   Tips and tricks:

    -   Doing a big redesign of a page? Excellent!

        -   Create a clone -- this allows you to make large changes
            > without affecting the original.

        -   When you're done, do a copy and paste to the original page
            > -- **from the Source** to ensure correct formatting

-   Common problems and questions:

    -   How to update a listing on the staff directory?

        -   *Problem*: Once you're looking at the search result, there's
            > no Edit tab!

        -   *Solution*: Click on the link for the first or last name and
            > the Edit tab appears ☺

Best practices
--------------

-   It's all about the user.

    -   Ask yourself: Is this page necessary? Fewer pages means a
        > simpler user experience and less work for the library too.

        -   Why do we need this page? Who will use it? For what? How
            > often? How do you know?

        -   Check to see if other pages cover the same information, or
            > close enough.

        -   Improve existing pages before building new ones.

    -   Is the information quick and easy to find and understand?

        -   Is the layout standard and clear?

        -   Is everything available without scrolling, or minimal
            > scrolling?

            -   If it can't fit on a one-to-two page handout \-- with a
                > reasonably large font, it is probably too long.

    -   Is the page findable?

        -   How are users likely to look for this information?

-   Link, don't duplicate.

    -   Many links to one good explanation of Boolean searching is
        > better than many good explanations on many pages.

    -   Duplicating content means more work and responsibility for the
        > library, and longer, more complicated pages for users.

Types of Web Authors + how we support them
------------------------------------------

Technical Definitions

-   Admin

-   Advanced web author

-   Web author

Use-Case Definitions Public Site

-   Liaison & Reference Librarians: Course Guides

-   Library Assistants \[Dawn, Ashley, John, Peggy, Catherine\]:
    > workshops, Course Guide editing

-   Library Advancement \[Ann and Dipa\]: mainly news and events pages

    -   Contexts: note that some of these will need to use either the
        > general "newsletter" context
        > ([[https://www.lib.sfu.ca/about/reach-us/news-events/newsletter]{.underline}](https://www.lib.sfu.ca/about/reach-us/news-events/newsletter))
        > or the Advancement context
        > ([[https://www.lib.sfu.ca/about/overview/giving]{.underline}](https://www.lib.sfu.ca/about/overview/giving))

-   All: News & events

-   Graphics: features

Use-Case Definitions Staff Site

-   Loans Desk: Loan Tips

-   Liaison & Reference Librarians & Library Assistants \[Dawn, Ashley:
    > Monthly Reports + access tools (eg ask away)

-   HR/Office: staff directory, staff blog, committee minutes

eBranch superpowers and how to wield them wisely
================================================

Deleting webpages

-   PROCEED WITH CAUTION. Note that any deletion can have wide-reaching
    > and permanent effects.

    -   When someone requests a deletion, if you or the web author are
        > uncertain, consider testing by unpublishing for a while. (E.g.
        > unpublish and check back in six months to see if it is still
        > needed. Then consult with web author before making final
        > decision.)

    -   However most of the time pages to be deleted are old and
        > outdated, and there is no controversy.

-   The basic steps to delete are:

    -   Find out what other pages will be affected by this deletion,
        > remove links to the soon-to-be-deleted web page

    -   Make a copy of the page to be deleted in case you need it again,

    -   Delete the page.

-   Detailed steps to follow:

    -   To find pages that link to this one **on the new site**:

        -   While logged in as a web author, see the "Internal links to
            > this web page" at the bottom of the page.

        -   You can also try searching for the title of the page (or
            > other keywords) in Library Search.

    -   To find pages that link to this one **on the staff site** (aka
        > Old Drupal):

        -   Find the Node Number by opening the Edit view of the page

        -   From [[Nina's
            > Notes]{.underline}](http://staff.lib.sfu.ca/divisions/ebranch/drupal-notes),
            > use *Search Links To* tool
            > ([[http://www.lib.sfu.ca/search/links\_to]{.underline}](http://www.lib.sfu.ca/search/links_to)
            > or
            > [[http://staff.lib.sfu.ca/search/links\_to]{.underline}](http://staff.lib.sfu.ca/search/links_to))
            > to find other pages that will be affected.

    -   Remove links to the deleted page.

    -   Quirks and complications:

        -   Sometimes the tool will show links that don't show up on the
            > referring page. This could be a failure, like a link to a
            > cached version of the page. It's worth checking the source
            > code in case the answer is revealed there. If the mystery
            > is unsolvable, use your judgement -- it may not be worth
            > pursuing.

    -   Deletion is forever. We can't recover deleted pages. Take a
        > snapshot in case the information on the page is needed again,
        > in one of these ways:

        -   The better way:

            -   Open Adobe Acrobat Pro

            -   Under **File**, choose **Create PDF from File,** then
                > choose Create PDF from Webpage (at the top left) and
                > paste in the URL

            -   Save to x: ebranch/deleted content

            -   Note that the page must be published for this to work.

                -   For unpublished pages consider (temporarily)
                    > publishing, or use the "lazy" way, below. **(Note:
                    > It's better to temporarily publish if possible.)**

        -   The "lazy" way: Save the webpage to the same location from
            > the browser via File 🡪 Save As.

        -   Then (optional) give a copy to the owner of the page.

    -   As an administrator, you'll see the Delete option once you are
        > in the Edit tab.

<!-- -->

-   It\'s really important that pages retain their URLs over time as
    > changing a URL breaks in bound links.

    -   In this case, the original page at:
        > <http://www.lib.sfu.ca/help/cite-write/citation-style-guides/apa/gov-docs-apa>

    -   now has the URL of:
        > <http://www.lib.sfu.ca/help/cite-write/citation-style-guides/apa/gov-docs-apa-0> 

-   For this page, it\'s even more important to retain its old URL as
    > lots of places link into it and I also don\'t want our web authors
    > to think that the guide has a new URL and thus they have to update
    > URLs.

-   It\'s also important from a Drupal perspective for a page to keep
    > its original node number as we use node numbers for menus.

-   Also, it\'s best to use the oldest version of a page as the root or
    > canonical one as it will have the longest or richest page revision
    > history.  The new one will probably only have a few revisions.

-   With the above in mind:

1.  when in source or plain text mode, copy Dawn\'s new content from the
    > new page at:
    > <http://www.lib.sfu.ca/help/cite-write/citation-style-guides/apa/gov-docs-apa-0> 

2.  paste when in text mode Dawn\'s new content over the old content on
    > the page at:
    > <http://www.lib.sfu.ca/help/cite-write/citation-style-guides/apa/gov-docs-apa>

3.  unpublish Dawn\'s new content, change the ownership to you, give it
    > an amended title to note deletion in 13 months, and set its
    > reminder date to 13 months from now.

4.  make sure the old page at:
    > <http://www.lib.sfu.ca/help/cite-write/citation-style-guides/apa/gov-docs-apa>
    > is published.

5.  presto, no one needs to update their links and the old,
    > historical content remains.

Setting up and deleting Drupal accounts: See Nina's notes for
Create/edit user accounts
([[http://staff.lib.sfu.ca/divisions/ebranch/drupal-notes]{.underline}](http://staff.lib.sfu.ca/divisions/ebranch/drupal-notes)
) and remember to set up accounts for both public and staff sites

-   Setting up:

-   The process requires a password, but this password won't be required
    > again

-   For staff site:
    > [[https://staff.lib.sfu.ca/admin/user/user]{.underline}](https://staff.lib.sfu.ca/admin/user/user)

    -   Remember to add the employee's name to the Personal Information
        > section (see the Personal Information tab).

-   For public site, go to People.

-   Deleting Drupal accounts:

    -   Remember to check for pages owned by the departed staff
        > member(s), and transfer ownership.

    -   Be sure to do the staff as well as public site.

Drupal: Setting up a Workshop account (adding a user to the Workshops
tool

-   The workshops tool is integrated into the public site.

-   Any web author who has write permissions on the public site can
    > create and edit workshops.

-   See our division's web page on workshops on the staff site which
    > details what the workshops tool does and how to use it.

General rules for setting up accounts:

-   First: go to the tool

-   Second: login via \[tool\]/user

-   Third: go to Keepass for passwords (and login address if needed)

-   However: For Drupal 7, go to People.

Drupal: Changing user account (profile) info (Drupal 7):

-   The Admin Way:

    -   People 🡪 search for user name, then Edit, then Main Profile.

-   The web author way:

    -   Log into Drupal, and go to Workspace.

    -   Click on Hello \[web author\]! at top right.

    -   Click on Edit tab.

    -   This will take you to a page with the \"Account\" button
        > highlighted. (This is where you can upload a photo. But you
        > can\'t change your contact info here.)

    -   Click on the \"Main Profile\" button. This will allow you to
        > update your position name, department, email, phone, office
        > number, even include a link to your website or blog. You can
        > also write up office hour information or add content under
        > \"Please note.\"

Changing web page contact info for librarian / web author on leave:

-   Ensure web pages with contact info are owned by the web author in
    > question

-   Ensure web pages have !\[\[owner intro\]\] tag instead of typed out
    > contact info

-   Enter info in web author\'s drupal profile:

    -   Full Name: Liaison Librarian

    -   Position: Psychology

    -   Department: Reference

    -   Public Email: libask\@sfu.ca

    -   Phone: 778.782.5735

    -   Please Note: 04 January 2011: Please note that Percilla Groves,
        > the Liaison Librarian for Psychology, is on leave. For
        > reference or research assistance, please use any of the SFU
        > Library\'s Ask a Librarian services.

Drupal: Contexts: adding/creating/changing

-   Contexts are for groups of related pages, particularly pages that
    > will share a menu, a header, and/or a footer. They can feel and
    > function something like home pages or landing pages, but on a
    > smaller scale.

-   When creating a new context:

    -   Ensure that the breadcrumbs lead to an index page

    -   Ensure that the index page is functional and will make sense to
        > users

        -   You can also add links to existing pages in other contexts
            > if this makes sense (e.g. older pages that would have
            > lived in this context if it existed at the time).

    -   Ensure that there's text in the Path Part. Be default, on
        > migration or creation of a new website, the Path Part field is
        > left blank and the context's URL is taken from the Name field
        > for the context. When creating a new context, it's safest to
        > add in an explicit Path Part so that if one change's the
        > context's name, the context's URL does not change and create
        > broken links. E.g. put in the Path Part task-working-groups
        > for the context Named "Task, working, & standing groups" so
        > that the URL for the context and pages that fall under it
        > always contain the
        > [[URL:\*/task-working-groups/]{.underline}](about:blank) even
        > if the context's Name changes.

-   To edit, including adding Header or Footer, go to Structure, then
    > Taxonomy, and then Contexts, then choose Edit.

    -   Tip: Ask web authors if they expect a series of pages to expand
        > in the future, or if they expect to need a home for a group of
        > related pages. If yes, creating a context may be a good
        > option.

    -   Note: Contexts can be hidden from public searches on the Library
        > website if desired (e.g. for pages intended mostly for
        > librarians). Under Index Flag choose "Force Do Not Index" for
        > this option.

-   Tech tip: If you are trying to edit a page and can't make the
    > changes you need, you may be able to do so in Context or Menu.

Drupal: Menus

-   1\) context 2) published content 3) menu

-   Menus need to have a context to live in to be active.

-   Menus must link to published pages in order for menu items to
    > display.

-   Menus should only link to our own pages.

    -   **If exception is to be made, use the markup "external".**

        -   This label will make the menu link appear a colour different
            > from the non-external menu links.

        -   The markup goes in the "classes" field in the menu item's
            > "menu item attributes" section.

        -   Also include a bit of padding around the menu items with the
            > markup "space-above" or "space-below" e.g. enter: external
            > space-above in the "classes" field.

        -   **EXAMPLE:** under Menu item attributes, in the Classes text
            > box: use the markup: "external space-above"

-   To edit a menu (e.g. to reorder or change the wording on menu items,
    > or to add a new menu link):

    -   Go to Structure, then Menus, then find the menu you wish to edit
        > and select List Links. You can edit the names of the Menu
        > Links (and drag to reorder) from here.

-   To **edit a menu or add a menu to a context**:

    -   Go to Taxonomy 🡪 Contexts, then choose your heading and select
        > Edit.

    -   Look for Menu Reference near the middle of the page and select
        > from the drop-down menu.

-   To **create** a menu, go to Structure 🡪 Menus and select Add menu.

    -   Once your menu has a name you can list links.

    -   You must also connect the menu to a context. To do this:

        -   go to Context

        -   choose the context where this menu will live and click Edit

        -   in Menu Reference, select your new menu.

    -   After selecting the menu from within a context, if the menu
        > doesn\'t appear in the context, click on \"configure\" from
        > the list of blocks at
        > http://www.lib.sfu.ca/admin/structure/block . Don\'t change
        > anything but save the block. The menu should appear.

-   To **delete/remove** a menu, make sure to remove the menu from the
    > context before deleting.

**Main menu on public site:**

To insert a second level menu item (e.g. Cite + Write under Help),
remember to fill out \"menu link attributes\" -\> \"title\", and set it
to \"facilities\" (or whatever the applicable parent / top level menu
name is) for it to show up under that menu. They each have a short name
to fill in there to associate them with the correct menu.

Best Bets

-   Only administrators should add (others can but should not!) --
    > because they are a big responsibility.

-   Generally we say no to this request but yes to improving findability
    > in other ways.

-   **The goal is to help with common searches that fail**:

    -   Most of the time if a search isn't working it's because our
        > content isn't well-written enough -- try that approach first.
        > (Add synonyms, use descriptive headings, make sure your
        > content is meaningful.)

-   Talk with Nina before adding.

-   Note:

    -   But Best Bets can be effective for tools such as Canvas, that
        > otherwise are very hard to find.

    -   At present there can only be **one** Best Bet search result so
        > watch for situations where there might be two results -- only
        > one will display ☹

-   Library search admin: http://search.lib.sfu.ca:8001/

-   Make sure it doesn't already exist.

-   Remember this is a free puppy (not beer) and will need to be
    > maintained.

Redirects

-   For redirects that are for the convenience of the web author or our
    public -- e.g. shortened URLs for publicity or "vanity" URLs (e.g.
    where we are planning to continue using a shortened URL) -- please
    enter the redirect as a 302 aka \"found\" URL and not a 301 \"moved
    permanently\" URL (where updating/correcting the URL).

    -   Note: use URLs of convenience very sparingly. Note that SFU has
        > its own URL shortener
        > ([[http://at.sfu.ca/create/?32990039.5238095]{.underline}](http://at.sfu.ca/create/?32990039.5238095))--
        > can be a better fit for shorter-term needs, e.g. special
        > events. Web authors can also consider creating a News & Events
        > item, which will be easy for users to find.

    -   You can see a list of all current redirects here:
        > [[https://www.lib.sfu.ca/admin/config/search/redirect]{.underline}](https://www.lib.sfu.ca/admin/config/search/redirect)

-   For example, a URL redirect that we mean to keep basically forever
    e.g.: 
    [[www.lib.sfu.ca/thesis]{.underline}](http://www.lib.sfu.ca/thesis)
    that points to the real URL of
    [[http://www.lib.sfu.ca/help/publish/thesis]{.underline}](http://www.lib.sfu.ca/help/publish/thesis)
    should be coded as a 302.

-   The 301 code tells search engines and URL checkers that they should
    update their link; the 302 doesn\'t.

-   Eliminating and fixing redirects (especially old ones):

    -   Some redirects have persisted for a long time, even though more
        > than one migration. If it *isn't* one that we intend to be
        > permanent (like researchcommons.ca, copyright.sfu.ca,
        > [[www.lib.sfu.ca/thesis]{.underline}](http://www.lib.sfu.ca/thesis),
        > etc.), we should update the referring links.

        1.  Usually the first step is to find out where the referring
            > link is and fix that. If this doesn't work:

        2.  Check the problem page's URL alias field and look for other
            > hints. However sometimes there is a redirect loop causing
            > the problem. If so:

        3.  Delete the redirect if the URLs are correct.

<!-- -->

-   Deleting a redirect:

    -   Go to Configuration 🡪 Search and metadata 🡪 URL redirects

    -   Copy (screen cap, etc.) the old redirect before deleting, just
        > in case.

> ![](media/image5.gif){width="3.742694663167104in"
> height="4.256514654418198in"}

Drupal: Editing Monthly Reports:

-   These reports are "views" and need to be edited via the owners'
    workspace. So:

    -   Go to
        [[www.lib.sfu.ca/workspace]{.underline}](http://www.lib.sfu.ca/workspace)
        and add the username, e.g.
        [[http://staff.lib.sfu.ca/workspace/nsaklika]{.underline}](http://staff.lib.sfu.ca/workspace/nsaklika)

Drupal: Webforms

-   DO NOT delete web form components.  Doing so will delete the
    > components and the choices end users have made from the Excel
    > results list.  Instead, mark the component as \"Private\" so that
    > it shows to web authors only.

    -   Within components or fields, remove options such as \"yes\" or
        > \"no\" with caution.  Drupal doesn\'t delete end user choices
        > of options that are no longer available but it does convert
        > the option from textual labels to their key values in the
        > Excel web form results sheet.  For example, if 0=yes and yes
        > is no longer available to end users as part of a select list,
        > then the results Excel sheet will show \"0\" instead of
        > \"yes\".  While it won\'t prevent the end user from choosing
        > option, consider putting text in front of an option that asks
        > end users to not choose it.

-   Setting fields to "private"

    -   Use this function to suppress fields that are temporarily not
        > needed

    -   They will continue to display to logged-in web authors, but not
        > to the public. So that web authors are not confused (or
        > alarmed), add a note to the helper text such as THIS FIELD HAS
        > BEEN MADE PRIVATE---VIEWABLE TO WEB AUTHORS ONLY.

    -   Note that required fields won't be required while set to
        > private.

-   Email notifications:

    -   Always include
        > [[library-ebranch\@sfu.ca]{.underline}](mailto:library-ebranch@sfu.ca)
        > as a form recipient.

    -   One can add free text into the \"E-mails\" area on a webform.
        > That is, one can add text around the widget-y things in square
        > brackets. (Much like the Belzberg hours web page with its
        > hours-widget plus text around it.) Example:

> ![](media/image4.png){width="3.773487532808399in"
> height="1.9129483814523185in"}

-   Remember to set up emails to be sent on submissions

    -   Click \"Webform\" to edit a form

    -   Then the \"Emails\" button

    -   Then \"edit\" on each email going out.

-   If it\'s to a library address you can include the IP address and
    > URL:

    -   Submitted on %date

    -   Submitted from IP: %ip\_address

    -   Submission URL: %submission\_url

-   Submitted values are: %email\_values

-   If it\'s to the person filling it out: \"Value of Your Address\...\"

    -   Submitted on %date

    -   Submitted values are:

    -   \%email\_values

-   For our webforms, the \*site-wide default\* \"from\" address must be
    > an individual\'s email address (such asnsaklika\@sfu.ca) or a role
    > account\'s address (such as libhelp\@sfu.ca).  The default
    > \"from\" address should NOT be an email list\'s address (such
    > as [[library-ebranch\@sfu.ca]{.underline}](mailto:library-ebranch@sfu.ca)).
    > There is a bug where setting the site-wide default
    > as [[library-ebranch\@sfu.ca]{.underline}](mailto:library-ebranch@sfu.ca)
    > prevents successful sending of form submissions if: 1. end users
    > use a non-\@sfu.ca email address and 2. the form receipt is
    > csssent to an email list. It is still OK for individual forms to
    > send their form receipts to email lists, just don\'t touch the
    > setting in Drupal for what the site-wide default is without first
    > checking with Todd.

-   For each form, under "webform", then "Form settings", set the "Per
    > user submission limit" to "Limit each user to 3 submissions every
    > 5 minutes" to avoid bad people spamming us with multiple
    > submissions over a short period of time.

-   Taxonomy lists in webforms: For \"select list\" webform component
    > types, there is an option to \"Load a prebuilt option list", which
    > makes our taxonomies (list of departments from workshops taxonomy)
    > show up in that list. The prebuilt list can't be edited. Also, for
    > lists we populate in-house, such as SFU departments, the info in
    > the field updates dynamically and is a reflection of the taxonomy
    > list so if someone adds in a new facilitator, for example, the new
    > facilitator will appear in the webform. Not also and importantly,
    > that if a taxonomy term is deleted \-- for example if a
    > facilitator's name is deleted \-- if that facilitator\'s name was
    > selected in a prior form submission, evidence of the end user
    > choosing that name in a form submission will not appear in
    > downloaded form submission tables and excel sheets.

-   To make a text field's width small, include the CSS attribute of:
    > small in the "CSS classes" field for the webform component that
    > you wish to make small. Other options are: medium and large.

-   The public site's Feedback form contains a webform field that is
    > hidden from public view called "referring URL". The field captures
    > the URL of the page the end user was on before they filled out the
    > form.

-   -   Webform Field Types:

  **Name**         **Description**
  ---------------- -----------------------------------------------------------------------
  Date             Presents month, day, year fields
  Email            Only accepts email addresses
  Fieldset         Group multiple fields; Allows for hideable text
  File             Allow users to upload files
  Grid             Create grid questions with ratio buttons; columns and rows for rating
  Hidden           Not visible to user, only administrator
  Markup           HTML for instructions/headings within the body of the form
  Multifile        Allow to upload more than one file
  Number           Numeric input filed (either as textfield or select list)
  Page break       Breaks form into multiple pages; adds next step button
  Select options   Create checkboxes, radio buttons (default) or drop-down menus
  Textarea         Larger, expandable area for text
  Textfield        Basic text
  Time             Present hour and minute fields; optional am/pm fields

Drupal: Adding an Advancement / Donate now / Give to the Library button
=======================================================================

We can place a \"give to the library\"-type button in a context so that
the button displays on every node that belongs to that context. 

-   The button must be placed at the context level.  It can not be
    > inserted into selected web pages that live within the same
    > context.  All pages in a context will show the button.

-   The button does NOT percolate down to nodes that live in
    > sub-contexts within a parent context.

-   The button displays in the left hand column of the public site under
    > the Library Search box and side menus, 

-   To insert a \"donate now\"-type button/image edit the chosen context
    > and click on the \"Show Donate Button\" check box.

-   To change the button or its link: \"Structure\" -\> \"Blocks\" -\>
    > \"Show Donate Button\".

Password / authentication on web pages
======================================

We use SFU\'s CAS service for authentication, which has nothing to do
with Drupal.  

Drupal has its own CAS module but it is for users with Drupal accounts
only so we don\'t use Drupal\'s module.

Check for requirements:

1.  Single page or pages in a context? We can put either individual
    > pages in a context behind CAS authentication or we can put all
    > pages under a context behind a password.

2.  Authentication:  We need to authenticate on one of or both:

    a.  an email list - the email list can comprised of compound SFU
        > email lists aka lists of list. 

    b.  a class of end users:    

        i.  valid-sfu-user - any SFU account

        ii. valid-sfu-staff - any SFU account with a staff role

        iii. valid-sfu-faculty - any SFU account with a faculty role

        iv. valid-sfu-student - any SFU account with a ugrad or grad
            > role

        v.  valid-sfu-sponsored - any SFU account with a role of other

        vi. valid-alumni-user - any SFU account with a role of alumnus

> CAS requires an SFU ID of users.  If end users who want to access our
> password protected web pages don\'t have a SFU ID, they won\'t be able
> to get past the CAS authentication.
>
> We can\'t provide editing rights for anonymous (non-Library web
> authors) users who want to view our password protected web pages.
>
> We authenticate into:

1.  [[Research Commons door
    > code]{.underline}](http://www.lib.sfu.ca/about/branches-depts/rc/services/door-code)

    a.  We authenticate on the following, individual lists:

        i.  [[dgs-gradstudents\@sfu.ca]{.underline}](mailto:dgs-gradstudents@sfu.ca)

        ii. [[lib-staff\@sfu.ca]{.underline}](mailto:lib-staff@sfu.ca)

        iii. [[post-docs\@sfu.ca]{.underline}](mailto:post-docs@sfu.ca)

        iv. [[nvivo-downloaders\@sfu.ca]{.underline}](mailto:nvivo-downloaders@sfu.ca)

        v.  educ-gradstudents\@sfu.ca

2.  [[Research Commons NVivo
    > download]{.underline}](http://www.lib.sfu.ca/about/branches-depts/rc/research/software/nvivo/download) -
    > besides being behind CAS, this also logs the end user\'s SFU
    > computing ID (as a hidden form field).

    b.  We authenticate on user type = require valid-sfu-staff, require
        > valid-sfu-faculty, require valid-sfu-student

    c.  We also authenticate on the [<nvivo-downloaders@sfu.ca>
        > list.]{.underline}

3.  [[Eikon + Datastream Access:
    > Segal]{.underline}](http://www.lib.sfu.ca/help/research-assistance/subject/business/eikon-datastream-segal)

    d.  We authenticate off of this list:  segal-eikon\@sfu.ca which
        > Mark B. owns.  lib-sys\@sfu.ca
        > and [[library-ebranch\@sfu.ca]{.underline}](mailto:library-ebranch@sfu.ca) should
        > be included as part of the segal-eikon list.

4.  Thesis defence room booking request form

    e.  Here:
        > [[http://www.lib.sfu.ca/facilities/rooms-spaces/thesis-defence-room-booking]{.underline}](http://www.lib.sfu.ca/facilities/rooms-spaces/thesis-defence-room-booking)

    f.  We authenticate on user type = require valid-sfu-staff, require
        > valid-sfu-faculty.

5.  Fraser Library equipment booking form

    g.  Here:
        > [[https://www.lib.sfu.ca/about/branches-depts/fraser/fraser-equipment/equipment-booking-request/equipment-booking-form]{.underline}](https://www.lib.sfu.ca/about/branches-depts/fraser/fraser-equipment/equipment-booking-request/equipment-booking-form)

    h.  We authenticate on user type = require valid-sfu-staff, require
        > valid-sfu-faculty, require valid-sfu-student plus
        > [[lib-sys\@sfu.ca]{.underline}](mailto:lib-sys@sfu.ca) .

6.  Journal Logins
    > [[https://www.lib.sfu.ca/find/journals-articles/journal-logins/journal-login]{.underline}](https://www.lib.sfu.ca/find/journals-articles/journal-logins/journal-login)

    i.  We authenticate SFU students, faculty and staff with valid SFU
        > ID

    j.  Frieze

    k.  Prospect Magazine

    l.  Quill & Quire

    m.  Social Policy

    n.  Tobacco journal

CAS prompt is tied to the Drupal context where the node lives.  Moving a
node to a new context means that CAS authentication on the node will not
function.

De-index nodes or contexts that are behind authentication so that
snippets from the protected pages do not appear in search engines,
including Library Search. Add the node or its whole context to the \"no
index\" list for solr. Google can\'t find pages behind CAS. Do the
following:

\- Go to structure -\> taxonomies -\> context -\> list terms\
- Edit whatever taxonomy you don\'t want to index\
- At the bottom of the taxonomy select \"Force Do Not Index\" for the
Index Flag field.\
\
Once that is done, the Solr index needs to be rebuilt. This is a weird
Drupal/Solr case where marking it not to index means that Drupal never
sends a \"delete from index\" to Solr, it just starts ignoring that
file. To rebuild the Solr index:\
\
- Go to configuration -\> Apache solr search\
- Click \"Delete the search and solr index\" and confirm\
- Click \"Index all queued content\" and confirm\
\
Web searches in MultiSearch and in Drupal will return empty until that
finishes, but it\'s pretty quick and I think reindexing the site is
about 5 minutes now. If you\'re not comfortable or don\'t have time, I
(i.e. Todd) can take care of it.

Kurt must set up password/authentication into web pages. eBranch staff
can't set up authentication into pages.

**Note:** Kurt can set up authentication for individual users, but this
is labour-intensive and in practice only happens in urgent situations
where all else has failed (for instance problems from IT Services).

It's always better to use a mail list rather than adding individual
log-ins, and areas that want to maintain control of names on an access
list may choose to create end maintain a mail list as a solution.

Other odds and ends
-------------------

-   Source code function

    -   Very handy for copying and pasting formatting from one webpage
        > for another, and for fixing coding glitches and errors.

    -   Can use Dreamweaver for larger changes or fixes.

Miscellaneous troubles that come up and how to shoot them
=========================================================

Vanishing Attachments
---------------------

-   Sometimes a web author (particularly from the SLC) will report that
    > an attachment has disappeared from a web page.

-   The general principle is that attachments should live in just one
    > spot. Occasionally the link to that one spot will fail (or
    > mistakenly lead to the "old" pre-migration location).

-   Steps to follow:

    -   1\) Hover over the link to see where the attachment is supposed to be --
        > note the node number/unique Drupal ID (e.g. 28965 -- this is where most
        > SLC handouts live now; the old one is node/12333)

    -   2\) Go to that page

    -   3\) In most cases, the link needs to be updated to the new location, and
        > that's it.

Problems with Godot pages
-------------------------

-   This \*may\* be us in the eBranch. Ask Todd for help.

-   If not, try lib-sys.

Problems with CUFTS pages
-------------------------

-   Most likely this is Sandra Wong's (ejournals) area.

Problems with Troy/Millennium pages
-----------------------------------

-   Try asking Frances in Processing.

Structural changes, like taxonomies and menus, that don't seem to "take"
------------------------------------------------------------------------

-   Try clearing the site's cache:

    -   Public site: under "Devel" =\> then "Cache clear"

    -   Staff site: manage =\> config =\> development =\> performance,
        > then \"clear all caches\".)

> Strange Library Search (Multisearch) results

-   Sometimes pages will be ranked higher (or lower) than expected, or
    > the search results may even seem to be broken (with irrelevant
    > results ranking higher than good results)

-   If a context in Drupal is marked as "do not index", the pages that
    > fall within that context will not be retrieved by Library Search.
    > To allow Library Search to index the content/page either move it
    > to a context that is indexed, add in a best bet to Library Search,
    > or change the whole context so that it's indexed.

-   If the "usual" things like keywords and titles are not the issues:

    -   Try to find out what search terms are being indexed and
        > affecting the results, by:

        -   clicking through to the search results and seeing
            > highlighted terms

        -   "view source" of page if necessary

    -   PROCEED WITH GREAT CAUTION (and talk with Nina and/or Todd
        > before doing these things): We can tweak search rankings in
        > Configuation 🡪 Search and metadata 🡪 Apache Solr search 🡪
        > Settings 🡪 Main website search 🡪 bias (for weighting by
        > content types or fields)

        -   Once here, you can also adjust the way facets display (e.g.
            > how results display in individual blocks in Library Search
            > search results).

-   Library Search uses a solr technology for its indexing. Some notes
    > on its relevancy ranking: a thing called \"length normalization\"
    > is coming into play. This is the thought that people would rather
    > read shorter pages, and that if the keywords make up more of a
    > percentage of the page content, it is more likely to be more
    > relevant. As a good example, if we look at a search for \"study
    > room\", the \"Floor Plans: Group Study Rooms - WAC Bennett
    > Library\" page only really has a few words on it, beyond the
    > title, and 50% of them match the search query. Let\'s ignore
    > various field boosts like words in the title (because they match
    > on both pages and complicate things), and compare it to the actual
    > \"Book a group study room\" page. While the words \"study room\"
    > occur more frequently in this page, when you take into account the
    > page length then the matching words might only make up 10% (fake
    > estimate) of the total content. This technique works well for most
    > content overall, but does run into complications when you hit
    > things like this where the content varies between tiny short
    > information pages and longer pages.

Digital sign in front door vestibule at Bennett Library
=======================================================

The eBranch, in conjunction with Natalie, administers the digital sign
in the front door vestibule at Bennett Library.

Data for the sign is taken from the data put out by our existing sites
and services, such as the hours tool.

The sign shows a non-public web page:
[[http://static.lib.sfu.ca/digital-signage/front\_door/front\_door.html]{.underline}](http://static.lib.sfu.ca/digital-signage/front_door/front_door.html)

Note: If the field \"Is this content applicable to a particular part of
the Library? If yes, choose all that apply.\" is tagged for Bennett,
then the news and events item will display on the sign. If not, it
won\'t display on the sign.

News and events will appear blank if there is an unescaped apostrophe in
a news and events headline. If all else fails, take out the apostrophe.
The news and events section uses the news and events api at
[[http://api.lib.sfu.ca/librarynews]{.underline}](http://api.lib.sfu.ca/librarynews)
.

The sign does not show emergency messages in any special way from the
hours tool where the priority field is set to \"emergency". That is,
hours display as open or closed in their little boxes on the sign as
they always do and will reflect whatever the closing time is or if the
Library is closed all day.

The sign displays the title of any where the Drupal content type is
\"emergency". The title is displayed on top of the big rotating image
that displays on the sign.

New books list
==============

A new books list shows here:
[[http://www.lib.sfu.ca/about/overview/collections/new-books]{.underline}](http://www.lib.sfu.ca/about/overview/collections/new-books)

It's a rolling list of books that have an ISBN AND a book cover that
have been catalogued during the past 30 days. The list runs on 1am on
Fridays. We use the first location listed only. If an item has two
locations, only the first is noted.

If no items for a fund code are included in the load, that fund
code/department won\'t display. Same goes for location limiter \-- no
books ordered for that location results in that location not appearing
in location limiter. Fund code and locations are not stored in the new
books tool. During each load the whole new books list is wiped and
completely new records are added.

The list relies on two Alma/Primo Analytics reports that pull new books
data:

-   physical\_items\_received\_last\_30\_days

-   ebooks\_activated\_last\_30\_days

This data is picked up by an eBranch script and moved into Drupal.

Computer availability tool
==========================

The computer availability tool shows which public computers at all three
libraries are in use or not. Take the numbers with a grain of salt e.g.
if a computer is powered off, it may show as in use. "In use" means
someone is logged onto the computer.

The tool is here:
http://www.lib.sfu.ca/facilities/technology/computer-availability

Stats for it are here:
[[http://lib-reports.lib.sfu.ca/labstats/]{.underline}](http://lib-reports.lib.sfu.ca/labstats/)

Todd maintains a list of the computers that report in to the tool.

Website migration 2015 leftover bits and bobs
=============================================

Webform data from old site:
---------------------------

-   Downloaded data from old webforms is kept at:  X:\\Keep\\new public
    > site 2015\\web form results from drupal 6 site 2009 to June 2015.

-   Archive It version of the main public site as it was (roughly) in
    > June 2015 is at:
    > [[http://wayback.archive-it.org/7642/20170829231902/http://lib-drupal.lib.sfu.ca:8089/]{.underline}](http://wayback.archive-it.org/7642/20170829231902/http://lib-drupal.lib.sfu.ca:8089/)

Drupal 8 instructions (staff site)
==================================

Location of old and new staff sites
-----------------------------------

As of Sept. 2018, the new or current staff site server is at:
lib-staff.lib.sfu.ca (server address: 142.58.129.113). Log in using SFU
ID at lib-staff.lib.sfu.ca/cas . Its alias for use by most staff (aka
CNAME) is **https://staff.lib.sfu.ca**.

The old staff site (pre-Dec 2018) is at:
[[https://staff-old.lib.sfu.ca]{.underline}](https://staff-old.lib.sfu.ca/).
Viewing of this site is restricted to those on the
[[library-ebranch\@sfu.ca]{.underline}](mailto:library-ebranch@sfu.ca)
and [[lib-sys\@sfu.ca]{.underline}](mailto:lib-sys@sfu.ca) email lists.

Access to the staff site and user account creation
--------------------------------------------------

To access the staff site, SFU Library staff must log in via SFU's CAS
authentication system.

Access is managed via the
[[lib-staff\@sfu.ca]{.underline}](mailto:lib-staff@sfu.ca) mail list: if
a staff member's user ID is on a mail list that belongs to
lib-staff\@sfu.ca, they will have access.

Note: Staff do **not** need to have a local Library network account set
up by Systems support technicians in order to gain access to the staff
site. Access is managed solely via their SFU computing IDs being part of
the [[lib-staff\@sfu.ca]{.underline}](mailto:lib-staff@sfu.ca) email
list (usually indirectly, i.e. via another mail list).

Troubleshooting access problems: If a staff member doesn't have access
to the staff site (e.g. as an authenticated user):

-   Most commonly it means that they have not been added to an internal
    > mail list yet (e.g. lib-loans, sfu-libr)

-   It might be that they only belong to mail lists that are not members
    > of lib-staff. See Authenticated User under Roles and Permissions
    > below for possible solutions.

-   The CAS authentication system accepts SFU accounts only. That is,
    > the staff member must have an email address that ends in \@sfu.ca
    > aka a computing account within the sfu.ca domain. If they don't
    > have a \@sfu.ca account, they won't get past the CAS
    > authentication screen. This issue may happen with ELN staff who by
    > default are given \@eln.bc.ca accounts. They are also given
    > secondary \@sfu.ca accounts. Make sure their \@sfu.ca ID is used
    > within the email lists that feed into lib-staff\@sfu.ca.

### Roles and permissions

There are five roles for access:

1.  **Anonymous User**

    -   The general public (anyone outside of the Library), who should
        > not have access to the staff and can only see the staff pages
        > that are the "open content" page type.

    -   There are very few of these "open content" pages, notably: the
        > "page not found" page and the "log into the staff site" page.

2.  **Authenticated User**

    a.  Staff who have **view-only** permissions for the site.

    b.  Every computing ID on the lib-staff list should have this role.

    c.  This includes "whitelisted" role accounts, such as belzcirc,
        > which give groups of staff relatively anonymous access to the
        > staff site.

    d.  This also includes (sub) mail lists that do not receive emails
        > that go to lib-staff, but are included on the Member Address
        > list for lib-staff (for example: rc-peers is on this mail
        > list, but we have unchecked the "delivery to user" option so
        > they won't receive email)

3.  **Web author**

    e.  Staff who can view **and edit** pages.

    f.  These staff are a subset of Authenticated Users.

    g.  Generally these are **not** role accounts. (Exceptions: libhelp,
        > libadmin, libsec.)

    h.  Web author accounts are created and managed manually::

        i.  Drupal admins can manually change Authenticated User (i.e.
            > view only) accounts to have Web Author permissions.

            -   In other words, a web author must already have access as
                > an Authenticated User. If we set up a web author
                > account manually for someone who does not, their
                > account will be disabled overnight.

        ii. Once a Drupal admin sets a staff member's permissions to be
            > a web author, those permissions will remain until we
            > manually remove the permissions or the author's account.

4.  **Advanced Users**

    i.  We don't have anyone in this role currently (on the staff site).

    j.  We could use this role to give advanced web authors more
        > permissions than those held by web authors. (Examples on the
        > public site include Catherine Louie, Tony Lu, Baharak
        > Yousefi.)

5.  **Administrator**

    k.  That's us!

    l.  This role should be given to only a few, trusted people.

### Nightly updates to keep access current

Each night, Todd runs a script that **compares** all user accounts that
belong to [[lib-staff\@sfu.ca]{.underline}](mailto:lib-staff@sfu.ca) to
the existing Drupal user accounts, using SFU's identity management
system called LDAP, and a report is emailed to the eBranch.

His script examines the accounts brought back from SFU's LDAP server
against the info in the **CAS Username field** in Drupal user accounts
that exist already on the staff site (i.e., users who are listed under
People in Drupal).

The script:

1.  Does NOT touch a user's Drupal account If a user's ID **already
    > exists in lib-staff\@sfu.ca AND also appears in the CAS Username
    > field in Drupal** (i.e. are listed under People in Drupal)

2.  Creates an Authenticated User (view only) account for the staff
    > member if their ID appears as part of the
    > [lib-staff\@sfu.ca]{.underline} list, but there is no match in the
    > CAS Username field in any of the Drupal accounts. (I.e. **if we
    > have not set up an account for that person in Drupal, but they are
    > part of lib-staff**).

3.  Unblocks a user's account in Drupal (but does not change the user's
    > role) if they are currently set as blocked in Drupal, but their ID
    > appears in [<lib-staff@sfu.ca>.]{.underline}

4.  Blocks user accounts in Drupal **if the ID used to be part of
    > [[lib-staff\@sfu.ca]{.underline}](mailto:lib-staff@sfu.ca)** **but
    > no longer exists (i.e. the person no longer works at the
    > Library)**. (For example: *Disabling account for uid \'296\' with
    > CAS login \'mnsmith\'*.)

    a.  Note that the corresponding staff site Drupal account is not
        > deleted from Drupal but the person will no longer be able to
        > access the staff site).

    b.  It is up to Drupal admins to delete an account. Before deleting,
        > ensure that content owned by the account is transferred to
        > another Drupal ID or deleted.

    c.  **ACTION:** Each day, view the email that Todd's scripts sends
        > to
        > [[library-ebranch\@sfu.ca]{.underline}](mailto:library-ebranch@sfu.ca)
        > **and delete newly blocked accounts**, **except**:

        i.  Choose to leave blocked instead in some circumstances, eg.
            > Where the **account** has many web pages linked to it and
            > we don't wish to assign those to someone else.

See below for more examples.

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

Each night, Todd's scripts sends out the following email:

**The output from this pretty much proceeds top to bottom as things are
processed rather than being dumped at the end.**

Cron \<tholbroo\@lib-staff\> cd /var/www/html; drush \--save
sfu-update-staff-users\
(Cron Daemon)
[[tholbroo\@lib-staff.lib.sfu.ca]{.underline}](mailto:tholbroo@lib-staff.lib.sfu.ca)\
Fri 12/14/2018 5:00 AM\
library-ebranch\@sfu.ca

**Loading lib-staff users from LDAP**\
(Indicates the script is starting and in this case is using LDAP as the
input source rather than loading from a file.)

**Users found to check**: 211\
(The input (LDAP in this case) was parsed and 211 records were found.)

**Creating new users**: 0\
See \#2 above. (If the script found any CAS IDs on lib-staff that do not
have Drupal accounts, it would automatically create a new user. In this
case, none were found.)

**Activating existing blocked users now in lib-staff list**: 0\
See \#3 above. (If the script found any CAS IDs on lib-staff that are
currently blocked in Drupal, they will be re-activated. None were
found.)

**Blocking CAS users not in lib-staff list**: 2\
See \#4 above. (In this case, two Drupal accounts were found for staff
who are no longer on the lib-staff list.) Check their accounts as above
and delete if appropriate.

**Skipping blacklist account name** belzcirc\
Skipping blacklist account name libhelp\
This is how we allow view-only access to staff groups via role
accounts.\
(No changes were made to those two accounts because they were on the
blacklist: \"belzcirc\" and \"libhelp\". Or whitelist, depends on how
you look at it. Blacklist for \"do not edit these accounts\" in this
case, even if they match the \"should be blocked\" criteria.)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*

### Personal SFU computing IDs that don't appear in the staff site's Drupal account list

There is a white list (Todd calls it a blacklist) of protected accounts
that Todd maintains. The white list should be for exceptions only e.g.
role accounts or odd occurrences (like libhelp).

If a staff member's SFU computing ID does not appear in Drupal's People
area aka its list of Drupal accounts, ask the staff member's supervisor
to make sure the staff member's computing ID is included in a divisional
list that is part of the divisional lists that make up the
[[lib-staff\@sfu.ca]{.underline}](mailto:lib-staff@sfu.ca) email list.
Wait a day for the computing ID to appear in Drupal's list.

### Role accounts and the white list

Some staff make use of role accounts, such as the accounts belzcirc
(https://staff.lib.sfu.ca/user/702/edit ) or rcommons. These role
account are recognized as valid by the CAS system and can be used for
logging into the staff site but they are frequently not included as part
of the [[lib-staff\@sfu.ca]{.underline}](mailto:lib-staff@sfu.ca) list.

Role accounts are not the same as email lists such as
[[lib-sys\@sfu.ca]{.underline}](mailto:lib-sys@sfu.ca). Email lists have
a hyphen in their name, as opposed to role accounts. Users cannot type
in an email list name as a login to access the staff site.

If role accounts are included in one of the email lists that comprise
[[lib-staff\@sfu.ca]{.underline}](mailto:lib-staff@sfu.ca), then these
role accounts will have corresponding Authenticated User Drupal accounts
on the staff site and will be able to access the site. **Note that these
accounts should be Authenticated User (view-only), as no one should be
able to create or edit pages anonymously. To set up Web author
permissions, do so for individuals, not role accounts. **

**Avoid including personal IDs for staff members in the whitelist.**

#### Setting up access for a role account

If role accounts are not included as part of the
[[lib-staff\@sfu.ca]{.underline}](mailto:lib-staff@sfu.ca) email list
and view-only access is for the role account is requested, then:

1.  create an account in Drupal for the role account AND

2.  also ask Todd to add it to a whitelist for access to the staff site
    > to prevent it being blocked each night by Todd's script.

As a temporary workaround, you can ask staff to log into a different
browser and use their personal ID (not a role ID) to access the staff
site.

#### Possible user confusion between role accounts and web author accounts

Note that web authors may get confused when they try to edit a page if
they are logged into the staff site using a role account, which does NOT
have editing permissions. They will need to log out of the site and log
back in with their personal Web Author ID or use a different browser and
make user of their Web Author ID.

### Creating a local, non-CAS account (an account where there is no SFU Computing ID)

We authenticate web authors into the staff site using the SFU CAS
system. Most web author accounts need to have a corresponding SFU
computing ID to be able to use CAS.

To create an account that is not a CAS account and has no equivalent SFU
Computing ID, such as the account we have for "webauthor", create the
account in Drupal but leave the "CAS Username" field in the account's
profile blank.

Megamenu
--------

The megamenu is a taxonomy list and not a true Drupal menu. To edit the
menu, find it under "taxonomy". The menu is cached so to see recent
changes to it, clear the site's cache (under "Devel" =\> then "Cache
clear"; or on the staff site: manage =\> config =\> development =\>
performance, then \"clear all caches\".)

The numbers 1-5 in the megamenu refer to the column where it displays.
For example, under the parent menu item "policies & procedures" the
second level child entry/link/label is in column 3 to keep it roughly
under the parent item.

Content types
-------------

To change how a field functions in a content type (e.g. to change a
taxonomy term list from type ahead format to a check box list, go to the
content type where you wish to change it and click on "Manage form
display". Under the widget column, choose radio button or whatever you
wish.

Webforms
--------

Recommended reading/viewing: A series of videos and webpage tutorials on
webforms -
[[https://lib-staff.lib.sfu.ca/admin/help/webform]{.underline}](https://lib-staff.lib.sfu.ca/admin/help/webform)
.

To create a form, click on Structure on the administrative toolbar, then
Webforms.

Once the form is completed, attached it to a basic page.

Email config for emailing completed submissions appear under the
Settings tab when viewing a form.

The Edit tab is the same as the Build tab. It's where you add fields or
elements to the form.

Test tab -- Use it to generate a test submissions with all of the fields
filled out. This saves you time by not making you fill out the fields.

Under Settings, Form -- choose "Autofocus the first element" and "Warn
uses about unsaved changes".

Separate multiple "to email" email addresses with commas.

For each form, under "Access", remember to uncheck the option for
anonymous users aka the public to view webforms.

Always copy library-ebranch on all forms submissions.

Remember to test submitting a webform as a non-admin.

Copy or mimic the settings/configuration used the "Library computer
account set up for new employees" form, if in doubt.

Incident reports
----------------

Incident reports are a content type.

### Email notifications 

Completed reports are sent to email lists at one of the three branches.
The email lists are:

-   incidents-belzberg

-   [[incidents-bennett\@sfu.ca]{.underline}](mailto:incidents-bennett@sfu.ca)

-   [[incidents-fraser\@sfu.ca]{.underline}](mailto:incidents-fraser@sfu.ca)

These email lists are noted in the Incident Libraries taxonomy on the
staff site. The taxonomy field accepts one email address/email list
only.

For changes to email recipients, **do not edit these fields in the
taxonomy**. Instead, go to the SFU Maillist service (e.g.
[[https://maillist.sfu.ca/]{.underline}](https://maillist.sfu.ca/) ) and
add or subtract individuals or other email lists to the above lists, as
required.

Search index configuration
--------------------------

One can adjust search ranking under Configuration, Search API, Main
Content, Edit Fields and/or Edit Processors -
[[https://lib-staff.lib.sfu.ca/admin/config/search/search-api]{.underline}](https://lib-staff.lib.sfu.ca/admin/config/search/search-api)
.

Search boxes on sets of pages
-----------------------------

To create a search box that is specific to a context (e.g. a search box
on all of the eBranch pages), examine an existing search block and then
do the following:

1.  Create a custom block -
    > [[https://lib-staff.lib.sfu.ca/admin/structure/block/block-content]{.underline}](https://lib-staff.lib.sfu.ca/admin/structure/block/block-content)

    a.  Make sure the text format in the body of the block is set to
        > Full HTML

    b.  In Source mode, add in the form code: \<form action=\"/search\"
        > method=\"get\"\>\<input name=\"f\[0\]\" type=\"hidden\"
        > value=\"context\_facet:266\" /\>\<input class=\"form-control\"
        > name=\"search\_api\_fulltext\" placeholder=\"Search\...\"
        > type=\"text\" /\>&nbsp;\</form\>

    c.  But stick in the applicable context facet number.

    d.  Configure the block like this one:
        > [[https://lib-staff.lib.sfu.ca/admin/structure/block/manage/searchstaffpageswithebranchcontextpreselected?destination=/admin/structure/block]{.underline}](https://lib-staff.lib.sfu.ca/admin/structure/block/manage/searchstaffpageswithebranchcontextpreselected?destination=/admin/structure/block),
        > restricting visibility to pages in a URL path like this:
        > /divisions-units/branches/ebranch and
        > /divisions-units/branches/ebranch/\* . The first path covers
        > the home page and the second path with the asterisk covers all
        > of the other pages in the context.

Staff site search statistics in Piwik
-------------------------------------

Searches etc. of the staff site are logged in Piwik -
[[https://piwik.lib.sfu.ca/piwik]{.underline}](https://piwik.lib.sfu.ca/piwik)
. Note that there are two entries for the staff site: "Staff - Drupal 8"
means the new site (the site that was created in Dec. 2018) and "Staff
website" means the old site, pre Dec. 2018 site.

Opt for Drupal .html pages over attached files such as .pdf documents
---------------------------------------------------------------------

Work with web authors to have them not post .pdf or .docx (Word) files
as attached documents. Post .html Drupal pages instead of attached files
unless the content requires a format or layout that can't be achieved
consistently in Drupal or the document is meant to be printed.

Attached files show now wrapper or context (e.g. breadcrumbs, menus,
full URL, site theming) so the reader can't navigate to related content.
We can't add metadata that can be indexed or boosted by the site search
for attached files and attached files create a search results display
that is confusing for end users. Attached files are also difficult to
manage during a site migration.

Drupal 7 instructions (public site)
===================================

Site location
-------------

new public site (www.lib.sfu.ca) at: 142.58.129.106 (as of July 2015)

Old public site: Archive It version of the main public site as it was
(roughly) in June 2015 is at:
[[http://wayback.archive-it.org/7642/20170829231902/http://lib-drupal.lib.sfu.ca:8089/]{.underline}](http://wayback.archive-it.org/7642/20170829231902/http://lib-drupal.lib.sfu.ca:8089/)

Menus
-----

-   To allow a content type to show a menu, edit the content type,
    > choose \"menu settings\", and check off the available menus.

-   Flyouts: Third level children will show as flyouts. Enable \"show as
    > expanded\".

-   BEFORE deleting a menu, delete it from whatever context the menu
    > appears in.  If you don\'t delete the menu from the context, the
    > context will continue linking to a soon-to-be-deleted menu and web
    > pages within the context will show an error message.

### Menu editing

1.  Before creating a menu, ensure that it has an existing context.  The
    > menu will display for all nodes in a single context.

2.  Menu link title:  These words appear publicly on top of the menu.

3.  Path: The path for this menu link. This can be an internal Drupal
    > path such as node/add or an external URL such as
    > http://drupal.org. Enter \<front\> to link to the front page. 
    > Use **node numbers** for these URLs to avoid broken links if a
    > page URL changes.

4.  Description: Which top menu level item the link belongs to
    > i..e **find, gethelp, borrow, facilities, aboutus**

5.  Enabled / Menu links that are not enabled will not be listed in any
    > menu: should be checked off

6.  Indented menu items: Check off  \"Show as expanded\" at the parent
    > item level if the parent has children items to be indented

7.  Parent link / The maximum depth for a link and all its children is
    > fixed at 9. Some menu links may not be available as parents if
    > selecting them would exceed this limit.

8.  After selecting the menu from within a context, if the menu doesn\'t
    > appear in the context, click on \"configure\" from the list of
    > blocks at http://www.lib.sfu.ca/admin/structure/block .  Don\'t
    > change anything but save the block.  The menu should appear.

9.  Highlighting a menu item in a different colour:  Given the menu item
    > attribute the class of:  highlight

10. Spacing between menu items:  include a bit of padding around the
    > menu items with the markup "space-above" or "space-below" e.g.
    > enter: external space-above in the "classes" field in the \"menu
    > item attributes\" section.

11. External links in a menu:  Try and avoid linking out of our site
    > from a menu on our site but, if it must be done, use the markup
    > \"external\" in the \"classes\" field in the \"menu item
    > attributes\" section.

Taxonomies
----------

-   Taxonomies:

    -   \"Applies to\" aka e.g. service or location.

    -   Audience

    -   \"Context\" is a taxonomy.

-   Don\'t need to apply \"relations\" section.

-   Have to change labels in every content type; can\'t make a change in
    > one place and have it percolate globally.

-   To change whether a taxonomy options appear as a select list or a
    > series of check boxes, change this setting in each content type
    > under \"manage fields\", then \"widget\"  There is no global
    > setting that can be applied across all content types.

To hide the contents of a taxonomy term e.g.
http://www.lib.sfu.ca/taxonomy/term/172 from public view:

1.  Edit vocabulary for the overall taxonomy.  For example, choose to
    > edit the vocabulary of the Context taxonomy.

2.  Under Manage Display, Custom display settings, check off Taxonomy
    > term page

3.  Click on the Taxonomy term page button.

4.  Under Fieldgroups, choose Hidden for:

    1.  Term display

    2.  Associated content display, and

    3.  Breadcrumb display

5.  Uncheck Include feed.

 

Contexts
--------

-   [View of the
    > contexts](http://lib-drupal.lib.sfu.ca/www/contexts-hierarchy)

-   Keep URLs and contexts the same.

-   Contexts are taxonomies.

-   Context fields:

    -   Name: Can be full words, including punctuation and capitals ;
        > appears in breadcrumbs ; it\'s not used for url. Use sentence
        > case.

    -   Description: is the old context ; don\'t touch it. ; leave this
        > field blank generally - you can put interal notes here but
        > won\'t show to the public.

    -   Menu reference: choose if everything under this context should
        > have a side menu.

    -   Header title - we\'re not using it.

    -   Relations: can use this area to reorder the items in the
        > context.

    -   URL Path settings - ignore it ; normally used to override the
        > context\'s URL.

    -   Path part: important - put how the context will appear in a URL
        > ; URL fragment; these fragments will be combined from
        > different contexts going up the chain. **USE DASHES** between
        > words

    -   Breadcrumb URL: Index pages for when user clicks on the
        > breadcrumb.

    -   Index flag:  choose whether to index this context for site
        > search ; set it to \"default from context\" for almost
        > everything ; \"force do not index\" doesn\'t index for the
        > site search everything under the context except for specific
        > nodes marked as \"force index\" which will be indexed.

    -   Context Header: can contain an image and/or text that can
        > display on every page associated with a context. Browse server
        > function doesn\'t work \-- use the image\'s URL instead.

    -   Context Footer:  can contain an image and/or text that can
        > display on every page associated with a context.

Search boxes
------------

-   Search boxes are linked to \"applies to\" (e.g. service or location)
    > category/taxonomy.

-   Search boxes can also be linked to a context.

-   Don\'t choose BOTH \"applies to\" AND context for a search box as
    > this will create an \"and\" search where items retrieved have to
    > be in both the \"applies to\" field and and \"context\" field.

-   Search box title uses its context title.

Content types
-------------

Fields:

-   Our widgets are supported in the text fields that are \"long text
    > and summary\" fields.  Use this type of field instead of the
    > \"long text\" field as the \"long text\" field doesn\'t support
    > our widgets.

-   Have to reorder fields in web author view content type-by-content
    > type

-   Remember to check web author display instead of admin display

-   Labels and help text is also done content type-by-content type

-   To add in a field to a content type, bring up the content type,
    > \"manage fields\", \"add existing fields\" and choose an existing
    > field from the drop down menu.

    -   If adding in the existing **file attachment or image gallery
        > functionality** to a content type, remember to add
        > in **\[node:nid\] **to the \"file path\" field so that attach
        > files are attached to the node, rather than centrally.

-   To hide a field in a content type from public view, bring up the
    > content type, \"manage display\",  \"format\" column, choose
    > \"hidden\".

-   To hide a field from rank and file web authors (e.g. the keyword
    > field):

    -   Add the field to the content type

    -   Edit the field.

        -   In the \"Field settings\", choose \"custom permissions\".

        -   Create own value for field should be set to administrator

        -   Edit own value for field should be set to administrator

        -   Edit anyone\'s value for field should be set to
            > administrator.

        -   View own value for field should be set to anonymous user and
            > authenticated user.

        -   View anyone\'s value fo field should be set to anonymous
            > user and authenticated user.

    -   From the list of fields for a content type choose \"manage
        > display\" then \"default\". If you want to keep the field
        > hidden from public view, move it to the \"hidden\" section.

        -   From the \"manage display\" area, click on \"search
            > index\".  If you want the new field to be indexed, don\'t
            > stick it in the \"hidden\" section.

-   Update reminder date: Page owners can send an email to themselves
    > via Drupal to remind themselves to update or review their page.

Content type headings are h2.

Inline headings result in a smaller label size.

CKeditor will show when the field type is filtered HTML.

Revisions:  Turn on node revisions under Structure, Content types,
\[Content type\], edit, templatepublishing options, create new revision.

Blogs
-----

-   The blogroll or home page for a blog is a view and its base URL has
    > the format of blog-roll/887 where 887 is the taxonomy ID for the
    > blog.  **Add in a URL alias as blog-roll/buec-buzz** .  Also alias
    > taxonomy/term/887 as blog/buec-buzz and taxonomy/term/892 as
    > context/buec-buzz-blog

-   Each blog needs its own context.

-   Our blogs:

    -   [BUS/ECON](http://www.lib.sfu.ca/help/research-assistance/subject/business/buec-buzz-blog)

    -   [CRIM](http://www.lib.sfu.ca/help/research-assistance/subject/criminology/library-scene-investigation)

    -   [Digital humanities innovation lab
        > (DHIL)](http://www.lib.sfu.ca/help/publish/dh/dhil/dhil-blog)

    -   [EDUC](http://www.lib.sfu.ca/help/research-assistance/subject/education/education-research-blog)

    -   [PIPING UP](http://www.lib.sfu.ca/about/reach-us/piping-up-blog)

    -   [PSYC](http://www.lib.sfu.ca/help/research-assistance/subject/psychology/psychology-resources-blog)

    -   [Scholarly
        > publishing](https://www.lib.sfu.ca/help/publish/scholarly-publishing/radical-access-blog)

    -   [SLC
        > blog](https://www.lib.sfu.ca/about/branches-depts/slc/in-common-blog)

-   Blog categories and blog tags are taxonomies.

### Blog posts

-   similar to other nodes but have templates for full and "teaser" view
    > modes to handle extra taxonomies (categories and tags), plus
    > previous and next links

-   has a context but it is hidden from the edit form and automatically
    > set by the Blog taxonomy when the blog post is saved

-   has a path part which is appended to the context path as usual to
    > form the URL

-   breadcrumb comes from the context as usual

-   side menu comes from the context as usual

-   context header/footer comes from the context as usual

### Blog taxonomy

-   the blog taxonomy has a couple of fields which are
    > important: **context and URL alias**.

-   context field is used to automatically assign a context to new blog
    > posts, plus showing the appropriate menu in the blog roll.

-   URL alias is the URL for the blog roll that forms part of the URL
    > path. It should match the base URL used for the context so that
    > blog posts appear like they are under it e.g.  The URL alias for
    > the DHIL blog is this:  help/publish/dh/dhil/dhil-blog, which is
    > the same as the context path in the site\'s hierarchy.

-   The "real" URL for blogs is the taxonomy term page for its blog
    > taxonomy: \"taxonomy/term/1333\". There's a URL alias for that
    > which covers the user friendly version.

### Blog roll

-   implemented as a view behind the scenes with a filter on the Blog
    > taxonomy term id. That should not be exposed to the end user
    > though, *due to URL aliasing*. It is fairly simple and just
    > renders the nodes in a list, but has some quirks because the nodes
    > are sortof embedded in content. Hopefully the side effects are
    > minimal.

-   to enable some Drupal "magic", we use a module to make it so that
    > the display of a Blog taxonomy term is handled internally by the
    > blog roll view above.

-   right side facets are exposed filters in the view.

-   left side menu, if there is one, is inherited from the context
    > assigned to the Blog taxonomy

-   context header/footer comes from the context assigned to the Blog
    > taxonomy

-   set the breadcrumb URL in the context to the full URL of the
    > blogroll without http://www.lib.sfu.ca/
    > e.g.help/publish/dh/dhil/dhil-blog.  Don\'t use the URL alias
    > field in the Context i.e. don\'t generate an automatic alias.

-   main image display in the blogroll:  In the blogroll, the main image
    > field content (photo and option caption) display as thumbnails.
    >  This behaviour is controlled under \"manage display\" in the
    > content type. From TH:  we've gone with setting the border size to
    > match the smaller thumbnail size, and removing the main image from
    > the blog roll when the page size is below 1024px wide. 

### Setting up a new blog

-   get a top image created

-   create a side menu if necessary

-   create a context. This will be the path for the blog roll and
    > individual posts will appear within it in the breadcrumb:

    -   context header/footer comes from the context assigned to the
        > Blog taxonomy

    -   set the breadcrumb URL in the context to the full URL of the
        > blogroll without http://www.lib.sfu.ca/
        > e.g.help/publish/dh/dhil/dhil-blog.  Don\'t use the URL alias
        > field in the Context i.e. don\'t generate an automatic alias.

    -   set the path part and such as usual

    -   add the top image for this blog to the context header

    -   assign the menu you created if necessary

    -   leave the breadcrumb URL for now, you will come back to it

-   create a new Blog taxonomy term:

    -   assign the context you created

    -   uncheck "Generate URL" and put in the URL that you want for the
        > blog roll. It should probably match the context URL for blog
        > posts (minus the blog post path part)

-   go back to the context you created and put the breadcrumb URL in as
    > "taxonomy/term/TID" but replace TID with the taxonomy term ID for
    > the Blog taxonomy you just created. You can get it from the
    > taxonomy term edit URL easily.

    -   The URL alias e.g. help/publish/dh/dhil/dhil-blog  in the blog
        > taxonomy entry should match what is in the Breadcrumb URL
        > field in the context

-   set up the search box:

    -   Under Structure =\> Blocks, there's an entry for the second
        > sidebar called \"Exposed form: blog\_roll-page". This is the
        > search form block. If you click configure on that, then
        > there's an entry at the bottom under Pages (restrict to pages)
        > that lists all the pages it should appear on. You need to add
        > a new line for the real blog taxonomoy URL:
        > \"taxonomy/term/1333\"

-   if the blog has or inherits a menu, to make the blogroll link in the
    > menu active or highlighted:

    -   For the menu, If you use "taxonomy/term/1333" as the menu link
        > path, it will highlight correctly, but only for the blog roll.
        > It does not handle showing as highlighted for individual
        > entries.

Contact us
----------

-   Picture of entrance is 800 x 450 pixels.  Can be smaller but keep
    > this aspect ratio.

Home pages
----------

There is a one minute delay before newly change content shows or is
taken away from a home page.

The title is only displayed if there's some body content, otherwise it
looks weird.

News and events and FAQs
------------------------

[[LIst of news and events with display dates, home pages they appear on,
etc.]{.underline}](http://www.lib.sfu.ca/data/news-and-events-status)

Assign FAQs and News and events items to their subject-based contexts. 
I.e.  instead of this:
http://www.lib.sfu.ca/faqs/help-contacting-copyright-holders do this
http://www.lib.sfu.ca/academic-integrity/copyright/help-contacting-copyright-holders

Rotating images
---------------

[[List of rotating images/featured images and the home pages they\'re
displayed
on]{.underline}](http://www.lib.sfu.ca/data/featured-images-status)

[[Tracking list of upcoming and finished rotating
images]{.underline}](https://docs.google.com/spreadsheets/d/1GaHTlxzttWct1W3ioRzxWmOSRY-SH8rGl_IjqPaDhNs/edit#gid=0)

-   After unpublishing, there is a **one minute delay** before the
    > rotating image disappears.

-   Rotating images are 800 x 450 pixels

-   Set these up in taxonomies and link from home page content type.

-   Unless an image is boosted to be pinned or have priority order as
    > first place, images appear randomly.  If two images are given
    > priority order, their order is randomized and then the second
    > group of non-pinned images is randomized.

Forms/ webforms
---------------

### Attached file fields in forms

The web form content type has the notation **\[node:nid\] **to the
\"file path\" field so that attached files are attached to the node,
rather than centrally.  Don\'t change this.

When adding a attached file field to a web form, make sure the field has
the following settings:

1.  Upload destination = Private files

    1.  Public files sit in a directory that is exposed and indexed by
        > the web server, which connects to Drupal

    2.  Private files sit in a directory that is subject to Drupal\'s
        > permission system

2.  Upload directory = webform/\[node:nid\]

List of forms with attached files:

1.  [Celebration of Authors:
    > Photo](http://www.lib.sfu.ca/about/initiatives/authors-event/author-photo)

2.  [Summit deposit
    > form](http://www.lib.sfu.ca/help/publish/summit-deposit-form)

3.  [GIS Day poster
    > submission](http://www.lib.sfu.ca/find/other-materials/data-gis/gis/gis-events/gis-day/gis-day-poster-submission-form)

To maintain user privacy:

Files attached as part of web forms are available to all web authors
logged into drupal.  As long as they are in the private files directory,
these attached files are not access to members of the public.  To
maintain end user privacy, attached files should be deleted from Drupal
as soon as they are not needed by library staff.  **Counsel staff to let
us know to delete these attachments as soon as the attachments are
downloaded to staff network drives.**  Also, ebranch staff should remind
web authors who own these forms with attached fields on a regular basis
to let us know when we can delete attached files from forms.  Web
authors do not have permissions to delete attached files.

### Site-wide webform settings

The default \"from address\" for webforms across our site **must** be an
individual\'s email address (e.g. nsaklika\@sfu.ca) or a role email
address.  It must NOT be the address of an email list (e.g.
library-ebranch\@sfu.ca).  SFU\'s mail list system rejects emails sent
from individuals using non-\@sfu.ca accounts when those emails are sent
from webforms to the mail list system.  Emails sent by end users using
their \@sfu.ca email accounts don\'t encounter this problem,

### Image gallery

-   Can be inserted into content types as a field

-   Image should be at least as large as the default image size of 800 x
    > 600

-   Images should be the same size in terms of pixels; same aspect
    > ration and same size.

-   Supports bulk image uploads but may not handle very large images
    > bulk uploaded simultaneously

-   Captions are optional; keep them short

-   Image gallery displays currently by default at the bottom of a page

-   Authors should keep image file sizes small but Drupal will compress
    > the images to a smaller size

-   Images within a single gallery should be roughly the same aspect
    > ratio

-   Images should be a maximum of 1200 pixels wide OR 720 pixels high

-   No capital letter, no spaces, no punctuation except for dashes in
    > file names

-   For the \<b\>best results\</b\> with an image gallery, each image:\
    > \<ul\>\
    > \<li\>should have the \<b\>same aspect ratio\</b\> i.e. have the
    > same dimensions\</li\>\
    > \<li\>should be \<b\>no smaller\</b\> than 800 x 600
    > pixels\</li\>\
    > \<li\>should be maximum \<b\>1200 pixels wide OR 720 pixels
    > high\</b\>\</li\>\
    > \<li\>should be a \<b\>small file size\</b\> (under 300
    > KB)\</li\>\
    > \<li\>should have a file name \<b\>free of punctuation except
    > dashes, contain no capital letters, and no spaces\</b\>\</li\>\
    > \</ul\>\
    > \<p\>Captions/titles are optional; keep captions short.\</p\>\
    > \<p\>The image gallery will display at the bottom of the
    > page.\</p\>

### FAQs

-   We use a [view](http://lib-drupal.lib.sfu.ca/www/faqs-browse).

-   Todd has hardcoded the words \"Browse FAQs\" to context id 13 (FAQs)
    > for now. It's done in the Header section by adding a global text
    > value set to PHP code.

Systems wiki
============

At:
[[https://wiki.its.sfu.ca/library/libsys/index.php/Main\_Page]{.underline}](https://wiki.its.sfu.ca/library/libsys/index.php/Main_Page)

Should, in theory, be open to all members of lib-sys\@sfu.ca

Personnel and staffing info
===========================

Vacation scheduling
-------------------

The goal is for each librarian to be able to take vacation when they
wish BUT also (except for the rare single day here and there) to ensure
that at least one of us is here to cover for the others during:

-an emergency, or, 

-for quick requests that we are comfortable dealing with

when the others are on vacation.  

For all vacations:

First check our calendars to see if the others are already taking the
time off.

If other librarians are already taking the time off and you would be the
only librarian working, please check in with them to see if they could
move their dates. 

If they can\'t move their dates, don\'t take the time off but contact
Division Head and we can see about accommodating your request. It may
well be possible that our non-librarian colleagues can cover for us for
emergencies.

For vacation time that\'s less than 5 days:

Please let Division Head know of the days you plan on taking off as an
fyi.

For a week or more:

Please check in with Division Head before declaring the time off so that
they have a general idea of when you\'re going to be away for long
periods.
